{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">

    <!-- üì± Configuration mobile essentielle -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <!-- üéØ Meta tags pour mobile -->
    <meta name="description" content="Championnat de La R√©union de Volleyball Jeunes - Gestion des d√©clarations d'√©quipes">
    <meta name="theme-color" content="#3498db">

    <!-- üì± iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Volley R√©union">

    <!-- üèê Favicon et ic√¥nes -->
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    <link rel="apple-touch-icon" href="{% static 'icon-192.png' %}">

    <!-- üìÑ Titre dynamique -->
    <title>{% block title %}Championnat de La R√©union de VolleyBall : Jeunes{% endblock %}</title>

    <!-- üé® CSS principal -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <!-- üî§ Police syst√®me optimis√©e -->
    <style>
        /* Police de fallback si probl√®me de chargement */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
                         'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji',
                         'Segoe UI Emoji', 'Segoe UI Symbol';
        }

        /* √âvite le flash de contenu non styl√© */
        .container {
            opacity: 0;
            animation: fadeIn 0.3s ease-in forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Loading state */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
    </style>

    <!-- üìä CSS additionnels par page -->
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- üîÑ Loading minimal -->
    <noscript>
        <div class="loading">
            <p>üèê Chargement...</p>
        </div>
    </noscript>

    <!-- üì± Container principal -->
    <div class="container">
        <!-- üö® Messages Django -->
        {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <!-- üìÑ Contenu principal -->
        <main role="main">
            {% block content %}
            <!-- Le contenu des autres templates viendra ici -->
            {% endblock %}
        </main>
    </div>

    <!-- üì± JavaScript pour interactions mobiles -->
    <script>
        // üîÑ Am√©liore l'exp√©rience tactile
        document.addEventListener('DOMContentLoaded', function() {
            // √âvite le double-tap zoom sur les boutons
            const buttons = document.querySelectorAll('button, .btn');
            buttons.forEach(button => {
                button.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    this.click();
                });
            });

            // Feedback visuel pour les touches tactiles
            const touchElements = document.querySelectorAll('button, .nav-card, .btn');
            touchElements.forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                });

                element.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
        });

        // üì± D√©tection de l'orientation mobile
        function handleOrientationChange() {
            // Recalcule les layouts si n√©cessaire
            if (window.orientation !== undefined) {
                document.body.classList.toggle('landscape', Math.abs(window.orientation) === 90);
            }
        }

        window.addEventListener('orientationchange', handleOrientationChange);
        window.addEventListener('resize', handleOrientationChange);

        // üéØ Analytics simple (optionnel)
        {% if not debug %}
        // Google Analytics ou autres tracking ici si n√©cessaire
        {% endif %}
    </script>

    <!-- üìä JavaScript additionnel par page -->
    {% block extra_js %}{% endblock %}
</body>
</html>